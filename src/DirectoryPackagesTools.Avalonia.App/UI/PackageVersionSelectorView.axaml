<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="using:DirectoryPackagesTools"
             mc:Ignorable="d" 
             x:Class="DirectoryPackagesTools.PackageVersionSelectorView"
             x:DataType="local:PackageMVVM">

  <UserControl.Resources>
    <local:VersionRangeShortTextConverter x:Key="asShortText" />
  </UserControl.Resources>

  <StackPanel Orientation="Horizontal">
    
    <ComboBox VerticalAlignment="Center" x:Name="myVersions"
              ItemsSource="{Binding AvailableVersions}"
              SelectedValue="{Binding Version, Mode=OneWay}" >

      <Interaction.Behaviors>
        <EventTriggerBehavior EventName="SelectionChanged" >
          <InvokeCommandAction Command="{Binding SetVersionCommand}" CommandParameter="{Binding #myVersions.SelectedValue}"/>
        </EventTriggerBehavior>
      </Interaction.Behaviors>

    </ComboBox>

    <TextBlock VerticalAlignment="Center" Text=" ðŸ”’"
               IsVisible="{Binding IsLocked}"
               ToolTip.Tip="Version is locked, removed '[' - ']' from SemVer to unlock" />

    <StackPanel IsVisible="{Binding CanUpdate}">
      
      <Button Margin="4,0,4,0"
              IsVisible="{Binding NewestRelease, Converter={x:Static ObjectConverters.IsNotNull}}"
              Content="{Binding NewestRelease, Converter={StaticResource asShortText}}" Background="LightGreen"
              Command="{Binding SetVersionCommand}"
              CommandParameter="{Binding NewestRelease}" />
      
      <Button Margin="4,0,4,0"
              IsVisible="{Binding NewestPrerelease, Converter={x:Static ObjectConverters.IsNotNull}}"
              Content="{Binding NewestPrerelease, Converter={StaticResource asShortText}}" Background="LightPink"
              Command="{Binding SetVersionCommand}"
              CommandParameter="{Binding NewestPrerelease}" />

    </StackPanel>

  </StackPanel>
  
</UserControl>
